<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8" />
  <title>To-do</title>
    <link rel="stylesheet" href="Idunno.css">
</head>

<body>
    
    <span onclick="document.getElementById('Login_Modal').style.display='block'" class="Btn" id=Login_Btn>Login</span>
    <span onclick="document.getElementById('Create_Modal').style.display='block'" class="Btn" id=Create_User_Btn>Create User</span>
    
    <br>
    <br>
    <br>
    <div id="mainDiv" class="header">
  <h2>To Do List</h2>
  <input type="text" id="ListInput" placeholder="Title...">
  <span class="Btn">Add</span>
</div>
    
    <ul id="mainList"></ul>

<div>

  <div id="Login_Modal" class="modal">
    <div class="modal-content">
      
        <span onclick="document.getElementById('Login_Modal').style.display='none'" 
        class="ExitBtn">&times;</span>
          <br>
        <h2>Login</h2>
          
      <div>
        <p>Username:</p><input type="text" id="Login_Username_Input" placeholder="..." class="modal-input">
        <p>Password:</p><input type="password" id="Login_Password_Input" placeholder="..." class="modal-input">
      </div>
      
        <p class="modal-foot" >Temp</p>
        <span onclick="Login()" class="Btn">Login</span>
      
        
    </div>
  </div>
</div>


<div>

  <div id="Create_Modal" class="modal">
    <div class="modal-content2">
      
        <span onclick="document.getElementById('Create_Modal').style.display='none'" 
        class="ExitBtn">&times;</span>
          <br>
        <h2>Create User</h2>
          
      <div class="container">
        <p>Email:</p><input type="email" id="email" placeholder="..." class="modal-input">
        <p>Username:</p><input type="text" id="username" placeholder="..." class="modal-input">
        <p>Password:</p><input type="password" id="password" placeholder="..." class="modal-input">
      </div>
      
        <p class="modal-foot" >Temp</p>
        <span id="CreateUserBtn" class="Btn">Login</span>
      
        
    </div>
  </div>

</div>

</body>
    
<script>

function CreateUser(){
        
        let form = document.getElementById("CreateUserBtn");
        form.onclick = function (evt) {
            evt.preventDefault();
            
            let userName = document.getElementById("username").value;
            let password = document.getElementById("password").value;
            let email = document.getElementById("email").value;
            
            console.log("Tester knapp");
            
            fetch('/app/user', {
                method:"POST",
                body:JSON.stringify({
                    name:username,
                    password:password,
                    email:email
                }),
                headers: {
                    "Content-Type": "application/json; charset=utf-8"
                },
                
            }).then(function(data){
                if(data.status < 400){
                    return data.json();
                }
            }).then(function(createdUser){
                if(createdUser.id){
                    console.log("Created user forhÃ¥pentlighvis")
                }
            }).catch(function(error){
                console.error(error);
            });
            
        }
    }

CreateUser();
    
</script>
    
</html>


