<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="modal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
</head>
<body>
    

<div class="header" style="color:aliceblue;">

        <div class="square"></div>

</div>


<div id="content">
<!-- Trigger/Open The Modal -->
<button id="myBtn">Add</button>

<div id="todos"></div>


<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
   <input id="task" type="text" placeholder="Subject">
   <input type="text" placeholder="Description">
 
   <button id="modalBtn">submit</button>
  </div>

</div>

<div id="editModal" class="modal">

        <!-- Modal content -->
        <div class="editModal-content">
          <span class="editClose">&times;</span>
         <input id="editTask" type="text" placeholder="Subject">
         <input type="text" placeholder="Description">
       
         <button id="editModalBtn">submit</button>
        </div>
      
      </div>
</div>
<script>
function clearInput(){
    
}
    
/// if the submit butto is clicked, the modal closes
    modalBtn.onclick = function(){
        modal.style.display = "none";
        
        
        //delay of clear inputvalue function
        setTimeout(function() {
            document.getElementById("task").value="";
        },1);
    }
var modal = document.getElementById('myModal');

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}




var todos = [];

function get_todos() {
         
         var todos_str = localStorage.getItem('todo');
         
         if (todos_str !== null) {
           todos = JSON.parse(todos_str);
         }
          return todos;


       }

function add() {
  var task = document.getElementById('task').value;
  var todos = get_todos();
  todos.push(task);
  //localStorage.setItem('todo', JSON.stringify(todos));
  console.log(todos);
  show();
  return false;
 
}

function remove() {
  var id = this.getAttribute('id');
  var todos = get_todos();
  todos.splice(id, 1);
  localStorage.setItem('todo', JSON.stringify(todos));
  show();
  return false;
}


function listModal(){
    console.log("hey")
    
//second modal


var editmodal = document.getElementById('editModal');

// Get the button that opens the modal
var editBtn = document.getElementsByClassName("editBttn");

// Get the <span> element that closes the modal
var editSpan = document.getElementsByClassName("editClose")[0];

// When the user clicks the button, open the modal 
editBtn.onclick = function() {
    editmodal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
editSpan.onclick = function() {
    editmodal.style.display = "none";
}


}

function show() {
  
    let todos = get_todos();
    let html = '<ul class="list">';
    let button = '<button class="editBttn"><i class="fa fa-bars"></i></button>';
  
  for (var i = 0; i < todos.length; i++) {
         html +=  '<li  id="'+ i+ '">' + todos[i] + button;
            
  };
          
          html += '</ul>';
          document.getElementById('todos').innerHTML = html;


  
  var button_delete = document.getElementsByClassName('remove');
  for (var i = 0; i < button_delete.length; i++) {
  button_delete[i].addEventListener('click', remove);
  
 
  
};

 /*var button_modal = document.getElementsByClassName('editBttn');
  for (var i = 0; i < button_modal.length; i++) {
  button_modal[i].addEventListener('click', listModal);
  }*/

  var editModal = document.getElementsByClassName('editBttn');
  for (var i = 0; i < editModal.length; i++) {
      localStorage.clear(todos);
  editModal[i].addEventListener('click', listModal);
 }

};


  

console.log(todos);
let list = document.getElementById("todos");

list.onclick = function(){

    var id = this.getAttribute('id');
    var element= todos.slice(0);
    console.log(event.target)

}



document.getElementById('modalBtn').addEventListener('click', add);
show();
</script>
</body>
</html>